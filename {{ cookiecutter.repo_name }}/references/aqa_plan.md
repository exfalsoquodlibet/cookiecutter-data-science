# Analytical Quality Assurance Plan
This Analytical Quality Assurance (AQA) plan outlines our implementation of the
[Aqua Book](https://www.gov.uk/government/publications/the-aqua-book-guidance-on-producing-quality-analysis-for-government)
for this project.
The AQA tasks are broken down into the following sections:
- [General](#general) - must be considered at all times by the team;
- [Design](#Design);
- [Build](#build) - for both developers and reviewers; and
- [Release](#release).
This plan is a **living document**, and should be updated and/or modified as necessary, e.g. if new tasks not listed
here become relevant to project success.
## General
These AQA tasks should be considered **at all times** by the entire team.

|ID|Name                   |Have you...                                                                                                                                                                                                                                                                                |Comments (if any)|
|:-|:----------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------|
|G1|Ethical considerations |Considered and documented the ethics behind your work?<br>Are you establishing safeguards to prevent ethics from being breached?                                                                                                                                                           |                 |
|G2|Security considerations|Considered a security-first approach to your work? For example, ensuring no secrets or data are stored insecurely.                                                                                                                                                                         |                 |
|G3|AQA scope              |Scoped a proportionate level of Analytical Quality Assurance (AQA) given your previous, current, and planned level of work?<br>Do you have sufficient resource to carry out the AQA? If not, are you sufficiently caveating your work so it is clear that the work has not been fully QA'd?|                 |

## Design
These AQA tasks should be considered by team during the pre-project phase, but can be subject to change.

|ID|Name                         |Have you...                                                                                                                                                                                                                                                                                                         |Comments (if any)                                                                                                                                                                                                                                                                   |
|:-|:----------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|P1|Governance and responsibility|Assigned a Senior Responsible Officer (SRO), Model Responsible Officer (MRO), AQA Reviewer, and Project Lead? Are they aware of their responsibilities? Are they being regularly updated about risks, and changes?<br>Got a Definition of Done?<br>Informed developers and peer reviewers or their responsibilities?|MRO is @mammykins. Lead Analyst is @suganya-s. SRO/AQA reviewer TBC. MRO/Lead will be updated during daily stand ups. SRO/AQA reviewer will be updated regularly as well.<br>Sufficient resource (2 DS/1 PA) to conduct continuous review; team are aware of their responsibilities.|
|P2|Version control and strategy |Agreed a system for version control, e.g. Git?<br>Have you established a strategy, e.g. branch and tag naming conventions, git rebase versus merge?                                                                                                                                                                 |As outlined in [the GDS Way](https://gds-way.cloudapps.digital/)                                                                                                                                                                                                                    |

## Build
These AQA tasks should be considered by developers, and completed prior to submitting a Pull/Merge Request. Reviewers
will determine whether your code meets these requirements, and any others they think need to be satisfied, **before any
code is merged**.
Your could should meet **at least** the [minimum standards](#minimum-standard), but also any relevant
[additional tasks](#additional-tasks).

### Minimum standard
Your code should meet these minimum standards.

|ID |Name                          |Have you...                                                                                                                                                                                                                                                                                                                                                                                                                                                            |Actions for developers?                                        |
|:--|:-----------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------|
|B1 |Methodology review            |Assessed different methodologies to use the best one for your work?<br>Have you documented your approach clearly?<br>If necessary, have you conducted a literature review, and/or approach experts, such as academics?                                                                                                                                                                                                                                                 |Review documentation, and update/revise if relevant.           |
|B2 |Code correctness              |Checked that the code is doing the right thing?<br>Is it applying the correct methodology and assumptions?<br>Does it run?                                                                                                                                                                                                                                                                                                                                             |                                                               |
|B3 |Agile documentation           |Written sufficient docstrings and code comments to understand the code?<br>Updated the README.md?<br>Used a ["document late" approach](http://agilemodeling.com/essays/documentLate.htm) to provide minimal formal documentation?                                                                                                                                                                                                                                      |Review documentation, and update/revise if relevant.           |
|B4 |Coding conventions            |Written and structured code to best practice, e.g. PEP8 (Python), Tidyverse (Python)? See [the GDS Way](https://gds-way.cloudapps.digital/).                                                                                                                                                                                                                                                                                                                           |                                                               |
|B5 |Data source checks            |Understood the reliability and readiness of your data sources?<br>Can you validate it against other data sources?<br>If relevant, are they consistent with data used in previous releases?<br>Updated the Data log?                                                                                                                                                                                                                                                    |Review Data log, and update/revise.                            |
|B6 |Data processing checks        |Checked any data processing is performed correctly?<br>Are there edge cases, missing/NULL values?<br>Are assumed distinct values/combinations actually distinct?<br>Updated the Data log?                                                                                                                                                                                                                                                                              |Review Data log, and update/revise.                            |
|B7 |Sense checking                |Considered if the inputs/outputs of our model reasonable? Do they make sense?                                                                                                                                                                                                                                                                                                                                                                                          |                                                               |
|B8 |Acceptance testing            |Predefined acceptance criteria for each task/ticket that meets user needs? Is this clear for your peer reviewer?                                                                                                                                                                                                                                                                                                                                                       |                                                               |
|B9 |Validation testing            |Split your data into training and test sets for validation?<br>Are you performing cross-validation?                                                                                                                                                                                                                                                                                                                                                                    |For machine learning only. Minimum standard.                   |
|B10|Reperformance testing         |Verified that different types of models would produce similar results? In machine learning terms, different ML models should provide similar predictions/decisions.                                                                                                                                                                                                                                                                                                    |For machine learning only. Minimum standard.                   |
|B11|Model interpretability        |Considered whether your model and/or its predictions/decisions need to be interpretable? If so, are you using an appropriately interpretable model, or applying, for example, model-agnostic interpretable methods for black-box models?                                                                                                                                                                                                                               |For machine learning only. Minimum standard.                   |
|B12|Code review                   |Checked that the code logic makes sense, and the code runs?<br>Does it produce outputs, if any?                                                                                                                                                                                                                                                                                                                                                                        |Add comments only to flag additional review items for reviewer.|
|B13|Peer review                   |Had your code, and the checks you've performed, independently checked by someone else?<br>Clarified that your completed checks are non-exhaustive, and they are free to perform others?<br>Clarified that you welcome constructive feedback?<br>Are you aware your code may not be reviewed, if it does not meet minimal standards/is not in a ready state?<br>Confirmed what has been reviewed by you/the reviewer, and, more importantly, what has not been reviewed?|Add comments only to flag additional review items for reviewer.|

### Additional tasks
If relevant, your code should also meet these standards as well.

|ID |Name                          |Have you...                                                                                                                                                                                                                                   |Actions for developers?                                                            |
|:--|:-----------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------|
|B14|Assumptions and caveats log   |Formally logged assumptions and caveats? Ideally, you should also add inline comments where major assumptions and caveats apply.                                                                                                              |Review log. Update/revise log, and add comments if relevant.                       |
|B15|Data log                      |Formally logged detailed data sources information?<br>Described the reliability and readiness of the data sources?<br>Provided a high-level overview of how this data is processed?                                                           |Review log. Update/revise log, and add comments if relevant.                       |
|B16|Exploratory assumption testing|Explored and tested the validity of your assumptions and caveats? Is there any supporting evidence, analytical or otherwise?<br>Updated the Assumptions log?                                                                                  |For new/revised assumptions only. Update Assumptions and caveats log, add comments.|
|B17|Assumption limit testing      |Explored the limits of your assumptions, e.g. very small, very large, zero, and NULL values?<br>Updated the Assumptions log?                                                                                                                  |For new/revised assumptions only. Update Assumptions and caveats log, add comments.|
|B18|Assumption sensitivity testing|Quantified or qualified the uncertainty around your assumptions? How do your assumptions perform around their boundaries?<br>Updated the Assumptions log?                                                                                     |For new/revised assumptions only. Update Assumptions and caveats log, add comments.|
|B19|Unit testing                  |Written unit tests for each function? Checked that the tests are valid and pass?<br>Fixed any broken tests (not just removed them)?<br>Understood that test coverage can be a false flag for assurance?                                       |For functions only. Add comments if no/limited tests.                              |
|B20|Integration testing           |Written integration tests for groups of functions?<br>Checked that the tests are valid and pass?<br>Fixed any broken tests (not just removed them)?<br>Understood that test coverage can be a false flag for assurance?                       |For functions only. Add comments if no/limited tests.                              |
|B21|Performance testing           |Written optimised code? Do processes run as fast as they code?<br>Have you considered parallelising?<br>For cloud-based projects, have you written code that minimises cost?<br>For user-facing aspects, are all aspects performing optimally?|Add comments to justify known areas of underperforming code.                       |

## Release
These AQA tasks need to be completed once the product is ready for release.

|ID|Name                |Have you...                                                                                                                                                                |Comments (if any)|
|:-|:-------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------|
|R1|Formal documentation|Consolidated all minimal formal documentation into a single technical guide?                                                                                               |                 |
|R2|User guide          |Ensured that your project can be executed from scratch by following your user guide and/or README.md?                                                                      |                 |
|R3|Assumptions review  |Reviewed and checked the validity of your assumptions and caveats in light of the released product?                                                                        |                 |
|R4|AQA review          |Verified that the team are happy with the AQA pre-release?<br>Have you demonstrated that the product is ready for release to the AQA Reviewer, and obtained their sign-off?|                 |
|R5|Sign-off            |Presented the work, and obtained sign-off from the MRO and SRO?                                                                                                            |           
